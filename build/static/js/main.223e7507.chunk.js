(this["webpackJsonprandom-popquiz"]=this["webpackJsonprandom-popquiz"]||[]).push([[0],{13:function(e,t,n){},3:function(e,t,n){e.exports=n(4)},4:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(2),r=n.n(o);n(13);document.title="Random Popquiz";const s=["\ud83e\udd13","\ud83e\udde0","\ud83d\udc68\u200d\ud83d\udd2c","\ud83d\udc69\u200d\ud83d\udd2c","\ud83e\udd16","\ud83d\udcbb","\ud83d\udcda","\ud83d\ude02"];function i(){const[e,t]=Object(a.useState)([]);return Object(a.useEffect)(()=>{const e=4*s.length,n=[];for(let t=0;t<e;t++)n.push({emoji:s[t%s.length],left:100*Math.random()+"%",animationDelay:5*Math.random()+"s",animationDuration:5*Math.random()+10+"s",fontSize:40*Math.random()+40+"px"});t(n)},[]),c.a.createElement("div",{className:"nerd-background"},e.map((e,t)=>c.a.createElement("span",{key:t,className:"falling-emoji",style:{left:e.left,animationDelay:e.animationDelay,animationDuration:e.animationDuration,fontSize:e.fontSize}},e.emoji)))}function l(){const[e,t]=Object(a.useState)("start"),[n,o]=Object(a.useState)(5),[r,s]=Object(a.useState)(0);Object(a.useEffect)(()=>{l()},[]);const l=async()=>{try{const e=await fetch("http://localhost:5000/api/visits"),t=await e.json();s(t.count)}catch(e){console.error("Error fetching visit count:",e)}};return Object(a.useEffect)(()=>{let a;return"countdown"===e&&n>0?a=setTimeout(()=>o(n-1),1e3):"countdown"===e&&0===n&&t("quiz"),()=>clearTimeout(a)},[e,n]),c.a.createElement("div",{className:"App"},c.a.createElement(i,null),"start"===e&&c.a.createElement("div",{className:"App-header"},c.a.createElement("h1",null,"Random Popquiz"),c.a.createElement("p",null,"This quiz has been taken ",r," times!"),c.a.createElement("button",{onClick:async()=>{try{const e=await fetch("http://localhost:5000/api/visits",{method:"POST"}),t=await e.json();s(t.count)}catch(e){console.error("Error updating visit count:",e)}t("countdown")},className:"start-button"},"Click to start")),"countdown"===e&&c.a.createElement("div",{className:"countdown-container"},c.a.createElement("h2",null,"Get Ready!"),c.a.createElement("div",{className:"countdown"},n)),"quiz"===e&&c.a.createElement(u,null))}function u(){const[e,t]=Object(a.useState)([]),[n,o]=Object(a.useState)(0),[r,s]=Object(a.useState)(0),[i,l]=Object(a.useState)(40),[u,m]=Object(a.useState)(!1),[d,h]=Object(a.useState)(null),[f,E]=Object(a.useState)(null);Object(a.useEffect)(()=>{p()},[]),Object(a.useEffect)(()=>{if(i>0&&!u){const e=setTimeout(()=>l(i-1),1e3);return()=>clearTimeout(e)}0!==i||u||m(!0)},[i,u]);const p=async()=>{try{const e=await fetch("https://opentdb.com/api.php?amount=10&difficulty=medium");if(!e.ok)throw new Error("Failed to fetch questions");const n=(await e.json()).results.map(e=>({question:w(e.question),answers:[...e.incorrect_answers,e.correct_answer].map(w),correct:w(e.correct_answer)}));n.forEach(e=>b(e.answers)),t(n)}catch(e){console.error("Error fetching questions:",e)}},b=e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}},w=e=>{const t=document.createElement("textarea");return t.innerHTML=e,t.value},j=()=>{o(0),s(0),l(40),m(!1),p()};if(0===e.length)return c.a.createElement("div",null,"Loading questions...");if(u)return c.a.createElement("div",{className:"quiz-container"},c.a.createElement("h2",null,r>5?"Congratulations!":"Quiz Completed"),c.a.createElement("p",null,"Your final score is: ",r," / ",e.length),c.a.createElement("button",{className:"try-again-btn",onClick:j},"Try Again"));const v=e[n];return c.a.createElement("div",{className:"quiz-container"},c.a.createElement("div",{className:"score-timer-container"},c.a.createElement("div",{id:"score"},"Score: ",r," / ",e.length),c.a.createElement("div",{id:"timer"},"Time: ",i)),c.a.createElement("div",{className:"question"},c.a.createElement("h2",null,"Question ",n+1,":"),c.a.createElement("p",null,v.question),c.a.createElement("div",{className:"answers"},v.answers.map((t,a)=>c.a.createElement("button",{key:a,onClick:()=>(t=>{h(t);const a=t===e[n].correct;E(a),a&&s(r+1),setTimeout(()=>{n+1<e.length?(o(n+1),l(40),h(null),E(null)):m(!0)},1e3)})(t),className:`\n                ${d===t?f?"correct":"incorrect":""}\n                ${d&&t===v.correct?"correct":""}\n              `,disabled:null!==d},t)))))}r.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(l,null)))}},[[3,1,2]]]);
//# sourceMappingURL=main.223e7507.chunk.js.map